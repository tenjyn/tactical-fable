<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tactical Fable — Grid Combat</title>
  <style>
    :root{
      --bg:#0f1115; --panel:#161a22; --muted:#8892a6; --line:#2a3040; --acc:#9be7a8; --acc2:#ffd166;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; background:var(--bg); color:#e6edf3}
    header{display:flex; gap:12px; align-items:center; padding:14px 16px; border-bottom:1px solid var(--line); position:sticky; top:0; background:linear-gradient(180deg, rgba(15,17,21,.98), rgba(15,17,21,.88)); backdrop-filter:saturate(1.2) blur(6px)}
    header h1{font-size:16px; margin:0; letter-spacing:.4px}
    header .sep{opacity:.4}
    .wrap{display:grid; grid-template-columns: 320px 1fr 320px; gap:14px; padding:14px}
    .panel{background:var(--panel); border:1px solid var(--line); border-radius:14px; padding:12px}
    .panel h2{margin:.2rem 0 .6rem; font-size:14px; color:#c9d4ee; letter-spacing:.3px}

    /* Grid */
    #grid{display:grid; grid-template-columns: repeat(10, 40px); grid-auto-rows:40px; gap:4px; place-content:start}
    .tile{width:40px; height:40px; background:#101621; border:1px solid #0b0f16; border-radius:6px; position:relative; display:grid; place-items:center; font-size:11px; color:#6b7485}
    .tile.coords{font-size:9px; opacity:.55; position:absolute; left:4px; top:2px}
    .tile.obstacle{background:#1b2231; border-color:#0e1420}
    .tile.hazard{background:linear-gradient(135deg, #1b2231, #232b3d)}
    .tile.in-range{outline:2px dashed #4aa1ff55}
    .tile.path{outline:2px solid #4aa1ff99}
    .tile.targetable{outline:2px solid #ff6b6b99}

    .unit{width:28px; height:28px; border-radius:8px; display:grid; place-items:center; font-weight:700}
    .P{background:linear-gradient(180deg, #34d399, #10b981); color:#052012; border:1px solid #0d8f66}
    .E{background:linear-gradient(180deg, #fca5a5, #f87171); color:#2a0b0b; border:1px solid #b43a3a}

    .row{display:flex; gap:8px; flex-wrap:wrap}
    button{background:#182031; color:#dbe4ff; border:1px solid #2a3856; border-radius:10px; padding:8px 10px; cursor:pointer; font-size:13px}
    button:hover{border-color:#3d4d74}
    button:disabled{opacity:.45; cursor:not-allowed}
    .primary{background:#1e2a3f; border-color:#3b4d78}
    .accent{background:#16251b; border-color:#205a35; color:#b7ffd0}

    .stat{display:flex; align-items:center; gap:6px; padding:6px 8px; background:#121723; border:1px solid #20283b; border-radius:10px; font-size:13px}
    .stat .k{opacity:.6; width:88px}
    .log{height:220px; overflow:auto; font-size:12px; line-height:1.4; padding-right:6px}
    .log p{margin:.35rem 0}
    .hpbar{height:8px; background:#0d141f; border:1px solid #22314e; border-radius:999px; overflow:hidden}
    .hpbar > span{display:block; height:100%; background:linear-gradient(90deg, #16a34a, #86efac)}
    .flex{display:flex; gap:8px}
    .grid-label{font-size:11px; color:var(--muted); margin-bottom:6px}
    .kbd{background:#0b0f16; border:1px solid #1b2231; padding:2px 6px; border-radius:6px; font-size:11px}
    footer{padding:10px 16px; color:var(--muted); border-top:1px solid var(--line)}
    a{color:#9bd1ff}
  </style>
</head>
<body>
  <header>
    <h1>⚔️ Tactical Fable</h1>
    <span class="sep">•</span>
    <span class="muted">Grid-based tactical combat in the Realms of Fable</span>
  </header>

  <div class="wrap">
    <!-- Left: Loadout / Stats -->
    <aside class="panel" id="left">
      <h2>Loadout</h2>
      <div class="row" id="classPicker"></div>
      <div style="height:8px"></div>
      <div class="stat"><span class="k">Class</span><span id="pClass">—</span></div>
      <div class="stat"><span class="k">HP</span><span id="pHP">—</span></div>
      <div class="stat"><span class="k">AC</span><span id="pAC">—</span></div>
      <div class="stat"><span class="k">ATK</span><span id="pATK">—</span></div>
      <div class="stat"><span class="k">DMG</span><span id="pDMG">—</span></div>
      <div class="stat"><span class="k">SPD (move)</span><span id="pSPD">—</span></div>
      <div style="height:8px"></div>
      <div class="hpbar"><span id="hpbar" style="width:100%"></span></div>
      <div style="height:8px"></div>
      <div class="row">
        <button id="newMatch" class="primary">New Match</button>
        <button id="toggleAI">AI: On</button>
      </div>
      <p style="color:#9fb3c8; font-size:12px">Move your chosen Fable archetype across the grid. Tactics are primary; lore is seasoning.</p>
    </aside>

    <!-- Center: Grid -->
    <main class="panel">
      <div class="grid-label">Round <span id="round">1</span> • Turn: <span id="turnOf">Player</span></div>
      <div id="grid"></div>
    </main>

    <!-- Right: Actions / Log -->
    <aside class="panel" id="right">
      <h2>Actions</h2>
      <div class="row">
        <button id="btnEnd" title="End your turn">End Turn</button>
        <button id="btnAttack" class="accent" disabled>Attack</button>
        <button id="btnSpecial" disabled>Special</button>
      </div>
      <div style="height:10px"></div>
      <div class="stat"><span class="k">Phase</span><span id="phase">Move</span></div>
      <div class="stat"><span class="k">Move left</span><span id="moveLeft">—</span></div>
      <div class="stat"><span class="k">Range</span><span id="rangeInfo">—</span></div>
      <div style="height:10px"></div>
      <h2>Battle Log</h2>
      <div class="log" id="log"></div>
    </aside>
  </div>

  <footer>
    Tactical Fable © The Sable Society (in spirit). Built for GitHub Pages.
  </footer>

<script>
// Classes framed in the Fable setting — mechanics-first, lore minimal.
const CLASSES = {
  "Knight of Arma": { key:"Fighter", hp:28, ac:16, atk:4, dmg:[1,8], spd:4, special:"Brassstrike", specialInfo:"+2 dmg, −2 to hit (melee)", type:"melee" },
  "Lantern-Bearer": { key:"Cleric", hp:22, ac:14, atk:3, dmg:[1,6], spd:4, special:"Consecrate", specialInfo:"Heal 1d6 (self or adj ally)", type:"melee" },
  "Woadwitch": { key:"Magic-User", hp:16, ac:12, atk:2, dmg:[1,4], spd:4, special:"Woadflame", specialInfo:"Firebolt 1d8 @ range 4", type:"ranged" },
  "Catling Vagabond": { key:"Thief", hp:18, ac:13, atk:3, dmg:[1,6], spd:5, special:"Shadowstep", specialInfo:"Backstab: +1d4 if adjacent", type:"melee" },
};

  // Simplified logging: Player and Enemy only.
  function log(msg){
    const p = document.createElement('p');
    p.textContent = msg;
    const logEl = document.querySelector('#log');
    logEl.appendChild(p);
    logEl.scrollTop = logEl.scrollHeight;
  }
  // Example adjustment in attack function (pseudocode snippet):
  // if(attacker.side==='P'){ log(`Player hits for ${total}`); } else { log(`Enemy hits for ${total}`); }

</script>
</body>
</html>
